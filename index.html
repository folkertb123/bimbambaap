<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Woordspel</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      font-size: 48px; /* basislettergrootte 48px */
    }
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 50px;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      transition: background-image 0.5s ease-in-out;
      color: white;
      -webkit-text-stroke: 1.5px black;
      text-stroke: 1.5px black;
    }
    #letter {
      font-size: 2.5rem;  /* 2.5 * 48 = 120px */
      margin-bottom: 25px;
    }
    #categorie {
      font-size: 2rem; /* 96px */
      margin-bottom: 15px;
    }
    #timer {
      font-size: 3rem; /* 144px */
      margin: 30px 0;
    }
    #melding {
      font-size: 1.8rem; /* 86.4px */
      margin-top: 25px;
      color: white;
      -webkit-text-stroke: 1.5px black;
      text-stroke: 1.5px black;
    }
    button {
      padding: 30px 60px;
      font-size: 2rem; /* 96px */
      background-color: rgba(0,0,0,0.6);
      border: none;
      border-radius: 8px;
      cursor: pointer;
      color: white;
      -webkit-text-stroke: 1.5px black;
      text-stroke: 1.5px black;
    }
  </style>
</head>
<body>

  <div id="letter"></div>
  <div id="categorie"></div>
  <div id="timer"></div>
  <div id="melding"></div>
  <button onclick="volgendeVraag()">Volgende vraag</button>

  <script>
    const ALLE_CATEGORIEN = [
      "Landenspel", "Dierenspel", "Merkenspel",
      "Bekende nederlander", "Kleur", "Eten", "Drinken",
      "Iets uit Carca of Catan", "Iets uit de coffeeshop",
      "Locatie in Leeuwarden", "Gratis dubbel pof",
      "Een spel, geen game", "Iets hoogs", "Iets kleiner dan Timo",
      "Een dorp in Nederland", "Een film of serie", "Een lichaamsdeel",
      "Iets goedkoper dan 5 euro"
    ];

    const fotos = [];
    for (let i = 1; i <= 37; i++) {
      const nummer = i.toString().padStart(5, '0');
      fotos.push(`images/image${nummer}.jpeg`);
    }

    let beschikbareCategorieën = [...ALLE_CATEGORIEN];
    let huidigSpel = null;
    let spelTeller = 0;
    let gratisDubbelPofGebruikt = false;
    let eersteVraag = true;

    let timer;
    let tijd = 30;

    function randomLetter() {
      const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
      return letters[Math.floor(Math.random() * letters.length)];
    }

    function randomFoto() {
      const index = Math.floor(Math.random() * fotos.length);
      const fotoUrl = `${fotos[index]}?t=${new Date().getTime()}`;
      document.body.style.backgroundImage = `url('${fotoUrl}')`;
    }

    function startTimer() {
      clearInterval(timer);
      tijd = 30;
      document.getElementById("timer").innerText = tijd;
      document.getElementById("melding").innerText = "";

      timer = setInterval(() => {
        tijd--;
        document.getElementById("timer").innerText = tijd;
        if (tijd <= 0) {
          clearInterval(timer);
          document.getElementById("melding").innerText = "Je gaat jilla";
        }
      }, 1000);
    }

    function volgendeVraag() {
      if (eersteVraag) {
        document.getElementById("letter").innerText = "";
        eersteVraag = false;
      }

      let gekozenCategorie;

      if (huidigSpel && spelTeller < 5) {
        spelTeller++;
        gekozenCategorie = `${huidigSpel} ${spelTeller}`;
      } else {
        huidigSpel = null;
        spelTeller = 0;

        if (beschikbareCategorieën.length === 0) {
          beschikbareCategorieën = [...ALLE_CATEGORIEN];
          if (gratisDubbelPofGebruikt) {
            beschikbareCategorieën = beschikbareCategorieën.filter(c => c !== "Gratis dubbel pof");
          }
        }

        let randomIndex = Math.floor(Math.random() * beschikbareCategorieën.length);
        let categorie = beschikbareCategorieën[randomIndex];
        beschikbareCategorieën.splice(randomIndex, 1);

        if (categorie === "Gratis dubbel pof") {
          gratisDubbelPofGebruikt = true;
        }

        if (categorie.endsWith("spel")) {
          huidigSpel = categorie;
          spelTeller = 1;
          gekozenCategorie = `${huidigSpel} ${spelTeller}`;
        } else {
          gekozenCategorie = categorie;
        }
      }

      document.getElementById("categorie").innerText = gekozenCategorie;

      randomFoto();

      startTimer();
    }

    window.onload = () => {
      const letter = randomLetter();
      document.getElementById("letter").innerText = "Beginletter: " + letter;
      randomFoto();
    };
  </script>
</body>
</html>
